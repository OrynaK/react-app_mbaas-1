!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BackendlessRequest=t():e.BackendlessRequest=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isStream=t.isObject=t.isFormData=t.castArray=void 0,t.castArray=function(e){return Array.isArray(e)?e:[e]},t.isObject=function(e){return null!=e&&"object"===r(e)},t.isFormData=function(e){return e&&e.constructor&&0===(""+e.constructor).trim().indexOf("function FormData")},t.isStream=function(e){return e instanceof n(5).Stream}},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;arguments.length>t;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=b();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){try{return u(u({},e),{},{body:JSON.parse(e.body)})}catch(t){return e}}function g(e){if(e.status>=200&&300>e.status)return e;throw new S.ResponseError(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Request=void 0;var O=n(10),j=function(e){return e&&e.__esModule?e:{"default":e}}(n(11)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{"default":e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=u?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i["default"]=e,n&&n.set(e,i),i}(n(12)),P=n(0),S=n(13);t.Request=function(e){function t(e,r,o){var i;return a(this,t),i=n.call(this),i.method=r,i.path=e,i.body=o,i.tags=undefined,i.unwrap=!0,i.cacheTTL=0,i.headers={},i.queryParams={},i.encoding="utf8",i.timeout=0,i}l(t,e);var n=d(t);return f(t,[{key:"set",value:function(e,t){if((0,P.isObject)(e))for(var n in e)this.set(n,e[n]);else void 0!==t&&(this.headers[e]=t);return this}},{key:"cacheTags",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this.tags=t,this}},{key:"query",value:function(e){return Object.assign(this.queryParams,e),this}},{key:"form",value:function(e){var n=this;if(e){var r=t.FormData;e instanceof r?this.body=e:function(){var t=new r;for(var o in e)!function(n){n&&(0,P.castArray)(e[n]).forEach(function(e){e&&e.hasOwnProperty("value")&&e.hasOwnProperty("options")?t.append(n,e.value,e.options):t.append(n,e)})}(o);n.body=t}()}return this}},{key:"useCache",value:function(){return this.cacheTTL=arguments.length>0&&arguments[0]!==undefined?arguments[0]:15e3,this}},{key:"resetCache",value:function(e){return e&&this.tags&&O.cache.deleteByTags(this.tags),this}},{key:"type",value:function(e){return this.set("Content-Type",e),this}},{key:"unwrapBody",value:function(e){return this.unwrap=e,this}},{key:"setEncoding",value:function(e){return this.encoding=e,this}},{key:"setTimeout",value:function(e){return this.timeout=e,this}},{key:"send",value:function(e){var n=this;this.emit("request",this);var r=this.path,o=w.stringify(this.queryParams);if(o&&(r+="?"+o),this.cacheTTL){var i=O.cache.get(r);if(i!==undefined)return Promise.resolve(i)}(this.headers["Content-Type"]||!(0,P.isObject)(e)||(0,P.isFormData)(e)||this.type("application/json"),e)&&(e="application/json"===this.headers["Content-Type"]&&"string"!=typeof e?JSON.stringify(e):e);var u=function(e){return n.unwrap?e.body:e},s=function(e){return n.cacheTTL&&O.cache.set(r,e,n.tags,n.cacheTTL),e},a=function(e){return n.tags&&"get"!==n.method&&O.cache.deleteByTags(n.tags),e};t.verbose&&console.log(this.method.toUpperCase(),decodeURIComponent(r),e,this.headers);var c=t.send(r,this.method.toUpperCase(),this.headers,e,this.encoding,this.timeout).then(m).then(g).then(u).then(s).then(a);return c.then(function(e){n.emit("response",e),n.emit("done",null,e)})["catch"](function(e){n.emit("error",e),n.emit("done",e)}),c}},{key:"then",value:function(e,t){return this.promise=this.promise||this.send(this.body),this.promise.then(e,t)}},{key:"catch",value:function(e){return this.promise=this.promise||this.send(this.body),this.promise["catch"](e)}}]),t}(j["default"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n(4),o=n(9),i=n(2);Object.defineProperty(i.Request,"FormData",{get:function(){return"undefined"!=typeof FormData?FormData:n(14)}}),i.Request.XMLHttpRequest="undefined"!=typeof XMLHttpRequest?XMLHttpRequest:undefined,i.Request.send=function(e,t,n,u,s,a){return("undefined"!=typeof i.Request.XMLHttpRequest?o.sendXmlHttpRequest:r.sendNodeAPIRequest)(e,t,n,u,s,a)},i.Request.verbose=!1,i.Request.methods=["get","post","put","patch","delete"],i.Request.methods.forEach(function(e){i.Request[e]=function(t,n){return new i.Request(t,e,n)}}),t=e.exports=i.Request,t["default"]=i.Request},function(e,t,n){"use strict";function r(e,t,r,i,u,s){return new Promise(function(a,c){var f=n(6).parse(e),l=(0,o.isFormData)(i)&&i,p="https:"===f.protocol,d={host:f.hostname,port:f.port||(p?443:80),path:f.pathname+(f.search||""),method:t,headers:r,timeout:s},h=function(){var e=n(1).Buffer,t=n(p?7:8),r=t.request(d,function(t){var n=[],r=[],o=0,i="",s=t.statusCode,f=t.statusMessage,l=t.headers;t.on("data",function(t){e.isBuffer(t)?t.length&&(o+=t.length,r.push(t)):n.push(t)}),t.on("end",function(){o?(i=e.concat(r,o),null!=u&&(i=i.toString(u))):n.length&&(i=n.join()),a({status:s,statusText:f,headers:l,body:i})}),t.on("error",c)});if(r.on("error",c),r.on("timeout",function(){r.destroy(Error("Connection aborted due to timeout"))}),i){if((0,o.isStream)(i))return void i.pipe(r);r.write(i)}r.end()};if(l)Object.assign(d.headers,l.getHeaders()),l.getLength(function(e,t){e||isNaN(t)||(d.headers["content-length"]=t),h()});else{if(i&&!d.headers["content-length"]){var y=n(1).Buffer;d.headers["content-length"]=y.byteLength(i)}h()}})}Object.defineProperty(t,"__esModule",{value:!0}),t.sendNodeAPIRequest=r;var o=n(0)},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')},function(e,t,n){"use strict";function r(e,t,n,r,u,s){return new Promise(function(a,c){var f=new i.Request.XMLHttpRequest;f.timeout=s,u||(f.responseType="arraybuffer"),f.open(t.toUpperCase(),e,!0),f.onload=function(){var e=o(f.getAllResponseHeaders()),t=f,n=t.status,r=t.statusText,i={status:n,statusText:r,headers:e};"utf8"===u?i.body=f.response||f.responseText:f.response&&(i.body=new Uint8Array(f.response)),a(i),f=null},f.onerror=function(){c(Error("Network Error")),f=null},f.ontimeout=function(){c(Error("Connection aborted due to timeout")),f=null},Object.keys(n).forEach(function(e){f.setRequestHeader(e,n[e])}),f.send(r)})}function o(e){var t={};return e?(e.split("\n").forEach(function(e){var n=e.indexOf(":"),r=e.substr(0,n).trim(),o=e.substr(n+1).trim();r&&(t[r]=t[r]?t[r]+", "+o:o)}),t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.sendXmlHttpRequest=r;var i=n(2)},function(e,t,n){"use strict";function r(e,t){return u(e)||i(e,t)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,s=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(a){s=!0,o=a}finally{try{u||null==n["return"]||n["return"]()}finally{if(s)throw o}}return i}}function u(e){if(Array.isArray(e))return e}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return e.length>r?{done:!1,value:e[r++]}:{done:!0}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,i=e},f:function(){try{u||null==n["return"]||n["return"]()}finally{if(s)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);t>n;n++)r[n]=e[n];return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.cache=void 0;var d=function(e,t,n){return{value:e,tags:t,ttl:n}},h=function(){return(new Date).getTime()},y=function(e,t){var n=e==t;return!n&&e instanceof RegExp&&(n=e.test(t)),!n&&t instanceof RegExp&&(n=t.test(e)),n},b=function(e,t){return!!e.find(function(e){return t.find(function(t){return y(e,t)})})};t.cache=new(function(){function e(t){f(this,e),this.setFlushInterval(t),this.map=new Map}return p(e,[{key:"setFlushInterval",value:function(e){this.flushInterval=e,this.flushTimer&&(clearInterval(this.flushTimer),delete this.flushTimer)}},{key:"get",value:function(e){var t=this.map.get(e);if(t){if(t.ttl>h())return t.value;this.map["delete"](e)}}},{key:"set",value:function(e,t,n,r){this.map.set(e,d(t,n,h()+r)),this.flushInterval&&!this.flushTimer&&(this.flushTimer=setInterval(this.flush.bind(this),this.flushInterval),this.flushTimer.unref&&this.flushTimer.unref())}},{key:"delete",value:function(e){this.map["delete"](e)}},{key:"deleteAll",value:function(){var e,t=s(this.map);try{for(t.s();!(e=t.n()).done;){this["delete"](r(e.value,1)[0])}}catch(n){t.e(n)}finally{t.f()}}},{key:"deleteByTags",value:function(e){var t,n=s(this.map);try{for(n.s();!(t=n.n()).done;){var o=r(t.value,2),i=o[0],u=o[1];u.tags&&b(e,u.tags)&&this["delete"](i)}}catch(a){n.e(a)}finally{n.f()}}},{key:"flush",value:function(){var e,t=h(),n=s(this.map);try{for(n.s();!(e=n.n()).done;){var o=r(e.value,2),i=o[0];t>o[1].ttl&&this["delete"](i)}}catch(u){n.e(u)}finally{n.f()}}}]),e}())(6e4)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,t["default"]=function(){function e(){r(this,e),this.events={}}return i(e,[{key:"on",value:function(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),this}},{key:"off",value:function(e,t){return e?this.events[e]&&(t?this.events[e]=this.events[e].filter(function(e){return e!==t}):delete this.events[e]):this.events={},this}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];this.events[e]&&this.events[e].forEach(function(e){return e.apply(void 0,n)})}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0;var r=n(0);t.stringify=function(e){var t=[];return Object.keys(e).forEach(function(n){var o=e[n];o!==undefined&&(0,r.castArray)(o).forEach(function(e){t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e)))})}),t.join("&")}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;t.length>n;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function a(e){var t=d();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:undefined;return(l=function(e){function n(){return p(e,arguments,b(this).constructor)}if(null===e||!h(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)})(e)}function p(e,t,n){return p=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&y(i,n.prototype),i},p.apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function h(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function y(e,t){return(y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return 502===e.status?"No connection with server":e.body||"Status Code ".concat(e.status," (").concat(e.statusText,")")}Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseError=void 0,t.ResponseError=function(e){function t(e){var r;u(this,t),r=n.call(this);var o=v(e);return r.message=o.message||o,r.code=o.code,r.status=e.status,r.headers=e.headers,r.body=e.body,r}s(t,e);var n=a(t);return i(t)}(l(Error))},function(e,t){throw Error('This Backendless JS SDK assembly is not intended for Node.js environment. You should use "lib" folder modules instead. For any questions please contact as at http://support.backendless.com/')}])});
//# sourceMappingURL=backendless-request.min.js.map